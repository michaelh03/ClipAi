# ClipAI Project Architecture

This document provides a concise overview of the ClipAI code-base layout.  It is intended as a quick reference for new contributors so they can navigate the repository with ease.

---

## 1. Repository Top-Level

```
ClipAI/                    â€“ Xcode application source
buildServer.json           â€“ Swift Package Manager build-server settings (for editors / LSP)
ClipAI.code-workspace      â€“ VS Code / Cursor workspace settings
ClipAI.xcodeproj/          â€“ Xcode project bundle (generated by Xcode)
ClipAITests/               â€“ Unit-test target
ClipAIUITests/             â€“ UI-test target
.docs/                     â€“ Project documentation
tasks.json                 â€“ Task runner definitions (for VS Code)
```

> **Note**  
> The remaining sections zoom into the `ClipAI/` application folder, which contains the actual Swift code, assets, and resources.

---

## 2. `ClipAI/` Application Folder

```
ClipAI/
â”œâ”€â”€ ClipAIApp.swift           â€“ SwiftUI @main entry point
â”œâ”€â”€ ContentView.swift         â€“ Root window/content scene
â”‚
â”œâ”€â”€ Assets.xcassets/          â€“ App icons & image assets
â”‚   â”œâ”€â”€ AppIcon.appiconset/
â”‚   â”œâ”€â”€ AccentColor.colorset/
â”‚   â””â”€â”€ clipboard-status.imageset/
â”‚
â”œâ”€â”€ Controllers/              â€“ "Coordinator" objects that own UIKit / AppKit windows
â”‚   â””â”€â”€ PopupController.swift
â”‚
â”œâ”€â”€ Model/                    â€“ Data-layer types (business logic & persistence)
â”‚   â”œâ”€â”€ ClipItem.swift            â€“ Domain model representing one clipped text item
â”‚   â”œâ”€â”€ ClipboardStorage.swift    â€“ File-based JSON persistence of history
â”‚   â””â”€â”€ ClipboardStore.swift      â€“ ObservableObject faÃ§ade exposing clipboard history CRUD operations
â”‚
â”œâ”€â”€ Services/                 â€“ Side-effect helpers that talk to the system
â”‚   â”œâ”€â”€ PasteboardMonitor.swift   â€“ Listens to NSPasteboard changes & notifies store
â”‚   â””â”€â”€ HotKeyListener.swift      â€“ Registers a global hot-key to toggle popup
â”‚
â”œâ”€â”€ ViewModels/              â€“ MVVM middle-layer objects
â”‚   â””â”€â”€ PopupViewModel.swift     â€“ State & intent handling for the popup view
â”‚
â”œâ”€â”€ Views/                    â€“ SwiftUI view hierarchy
â”‚   â”œâ”€â”€ PopupView.swift          â€“ Top-level floating window with search bar & clipboard list
â”‚   â”œâ”€â”€ SearchBarView.swift      â€“ Reusable search field integrated in popup
â”‚   â””â”€â”€ ClipItemRowView.swift    â€“ Row displaying a single `ClipItem`
â”‚
â””â”€â”€ Preview Content/          â€“ Resources for SwiftUI previews
    â””â”€â”€ Preview Assets.xcassets/
```

### 2.1 Architectural Style

The project follows a lightweight **MVVM** (Modelâ€“Viewâ€“ViewModel) pattern:

* **Model** â€“ Pure Swift value types & persistence helpers (`Model/`, `Services/`).
* **ViewModel** â€“ `ObservableObject` classes that transform model data into UI state (`ViewModels/`).
* **View** â€“ SwiftUI view layer (`Views/`).

`Controllers/` host any AppKit-specific window management that does not fit cleanly inside SwiftUI, keeping SwiftUI views platform-agnostic.

---

## 3. Tests

```
ClipAITests/          â€“ Unit tests targeting the Model & ViewModel layers
â””â”€â”€ ClipboardStoreTests.swift

ClipAIUITests/        â€“ UI automation written with XCUITest
â””â”€â”€ ClipAIUITestsLaunchTests.swift
```

---

## 4. Documentation & Plans

```
docs/
â””â”€â”€ clipboard_manager_plan.md   â€“ Early design notes & future roadmap
```

---

## 5. Build & Tooling Files

* **`buildServer.json`** â€“ Enables SourceKit-LSP / other editors to discover build settings.  
* **`tasks.json`** â€“ Helper tasks (e.g., clean, test, lint) for VS Code.
* **`.xcodeproj` & `.xcworkspace`** â€“ Generated project files; never edit by hand.

---

## 6. Quick Navigation Table

| Layer       | Primary Types / Responsibilities | Key Files |
|-------------|----------------------------------|-----------|
| Model       | Domain entities, persistence     | `ClipItem.swift`, `ClipboardStorage.swift`, `ClipboardStore.swift` |
| Services    | System integrations              | `PasteboardMonitor.swift`, `HotKeyListener.swift` |
| ViewModel   | UI state & intent                | `PopupViewModel.swift` |
| View        | SwiftUI views                    | `PopupView.swift`, `SearchBarView.swift`, `ClipItemRowView.swift` |
| Controller  | Window & lifecycle management    | `PopupController.swift` |
| Tests       | Unit & UI tests                  | `ClipAITests/`, `ClipAIUITests/` |

> With this mapping you can jump from a UI feature to the relevant Model or Service with ease.

---

Happy hacking!  ðŸŽ‰
